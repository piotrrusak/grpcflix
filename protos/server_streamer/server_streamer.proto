syntax = "proto3";
package video;

service ServerStreamerService {
  rpc Stream(stream ServerStreamerMessage) returns (stream StreamerServerMessage);
}

message ServerStreamerMessage {
  oneof payload {
    ServerStartRequest server_start_request = 1;
    ServerStopRequest server_stop_request = 2;
    ServerSourceRequest server_source_request = 3;
    ServerUploadStart server_upload_start = 4;
    ServerUploadChunk server_upload_chunk = 5;
    ServerUploadEnd server_upload_end = 6;
  }
}

message StreamerServerMessage {
  oneof payload {
    StreamerServerInfo info = 1;
    StreamerServerChunk chunk = 2;
    StreamerNoSuchFileRequest streamer_no_such_file_request = 3;
  }
}

message ServerUploadStart {

}

message ServerUploadChunk {
  bytes chunk = 1;
}

message ServerUploadEnd {
  string filename = 1;
}

message StreamerNoSuchFileRequest {
  
}

message ServerSourceRequest {
  string source = 1;
}

message ServerStartRequest {

}

message ServerStopRequest {

}

message StreamerServerChunk {
  bytes chunk = 1;
}

message StreamerServerInfo {
  string info = 1;
}